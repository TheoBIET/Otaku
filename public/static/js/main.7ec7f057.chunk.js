(this.webpackJsonpotaku=this.webpackJsonpotaku||[]).push([[0],{16:function(e,t,i){},17:function(e,t,i){"use strict";i.r(t);var s=i(1),n=i.n(s),a=i(9),c=i.n(a),o=i(6),r=i.n(o),l=i(7),m=i(2),_=i(3),j=i(5),d=i(4),h=i(0),p=function(e){Object(j.a)(i,e);var t=Object(d.a)(i);function i(){return Object(m.a)(this,i),t.apply(this,arguments)}return Object(_.a)(i,[{key:"render",value:function(){return Object(h.jsxs)("div",{id:"Navbar",children:[Object(h.jsxs)("div",{className:"Navbar__title",children:[Object(h.jsx)("img",{className:"logo",src:"/logo.png",alt:"Logo"}),Object(h.jsxs)("h1",{className:"animate__animated animate__tada",children:["oTaku",Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"Anime Search Engine"})]})]}),Object(h.jsxs)("div",{className:"Navbar__searchInput",children:[Object(h.jsx)("input",{type:"text",placeholder:"One Piece"}),Object(h.jsx)("div",{className:"purple-button",children:"Rechercher"})]})]})}}]),i}(s.Component),b=function(e){Object(j.a)(i,e);var t=Object(d.a)(i);function i(){return Object(m.a)(this,i),t.apply(this,arguments)}return Object(_.a)(i,[{key:"render",value:function(){return Object(h.jsx)("div",{id:"AnimeLoader",children:Object(h.jsxs)("svg",{width:"50",height:"50",viewBox:"0 0 135 135",xmlns:"http://www.w3.org/2000/svg",fill:"#93C",children:[Object(h.jsx)("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z",children:Object(h.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"-360 67 67",dur:"2.5s",repeatCount:"indefinite"})}),Object(h.jsx)("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z",children:Object(h.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"360 67 67",dur:"8s",repeatCount:"indefinite"})})]})})}}]),i}(s.Component),u=function(e){Object(j.a)(i,e);var t=Object(d.a)(i);function i(e){var s,n=this;return Object(m.a)(this,i),(s=t.call(this,e)).callApi=Object(l.a)(r.a.mark((function e(){var t,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/api/base");case 2:return t=e.sent,e.next=5,t.json();case 5:i=e.sent,s.setState({most_viewed:i.most_watched,best_rated:i.best_rated,our_selection:i.our_selection,isLoading:!1}),s.props.onLoadComplete();case 8:case"end":return e.stop()}}),e)}))),s.sendAnimeID=function(e){var t=e.target.closest(".Navigation__row__selection__item").getAttribute("data-mal-id"),i=e.target.closest(".Navigation__row__selection__item").getAttribute("data-episodes");s.props.onAnimeClick(t,i)},s.getCategoryList=function(e){return e.props.map((function(e,t){return t<3&&Object(h.jsx)("li",{children:e.label},e.id)}))},s.getMoviesRow=function(e){return e.props.map((function(e){return Object(h.jsxs)("div",{className:"Navigation__row__selection__item","data-mal-id":e.mal_id,"data-episodes":!!e.episodes.length,children:[parseInt(s.props.animeID,10)===e.mal_id&&s.props.animeIsLoading?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{src:e.medium_picture_url,alt:e.en_title,className:"Navigation__row__selection__item__background loading",onClick:s.sendAnimeID}),e.episodes.length>0?Object(h.jsx)("div",{className:"Navigation__row__selection__item__availability loading",children:"\ud83d\udc4d"}):Object(h.jsx)("div",{className:"Navigation__row__selection__item__availability loading",children:"\ud83d\udc4e"}),Object(h.jsx)("div",{className:"Navigation__row__selection__status",children:Object(h.jsx)(b,{})})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{src:e.medium_picture_url,alt:e.en_title,className:"Navigation__row__selection__item__background",onClick:s.sendAnimeID}),e.episodes.length>0?Object(h.jsx)("div",{className:"Navigation__row__selection__item__availability",children:"\ud83d\udc4d"}):Object(h.jsx)("div",{className:"Navigation__row__selection__item__availability",children:"\ud83d\udc4e"}),Object(h.jsx)("div",{className:"Navigation__row__selection__status --play",children:Object(h.jsx)("i",{className:"fas fa-play"})})]}),Object(h.jsxs)("div",{className:"Navigation__row__selection__item__informations",children:[Object(h.jsxs)("h3",{className:"item__informations__title",children:[e.en_title,Object(h.jsx)("span",{className:"japan"})]}),Object(h.jsx)("h4",{className:"item__informations__title japan",children:e.jp_title}),Object(h.jsx)("h5",{className:"item__informations__nsfw --white",children:"\ud83e\udd75"}),Object(h.jsx)("ul",{className:"item__informations__categoryList",children:Object(h.jsx)(n.getCategoryList,{props:e.categories})}),Object(h.jsx)("p",{children:e.synopsis}),Object(h.jsxs)("div",{className:"item_informations_icons",children:[Object(h.jsxs)("h5",{className:"item_informations_icons__rank",children:[Object(h.jsx)("i",{className:"fas fa-trophy"}),"#\xa0",e.rank]}),Object(h.jsxs)("h5",{className:"item_informations_icons__mean",children:[Object(h.jsx)("i",{className:"fas fa-star"}),e.mean," / 10"]}),Object(h.jsxs)("h5",{className:"item_informations_icons__num-episodes",children:[Object(h.jsx)("i",{className:"fas fa-video"}),e.num_episodes," ep."]}),Object(h.jsxs)("h5",{className:"item_informations_icons__rating",children:[Object(h.jsx)("i",{className:"fas fa-exclamation-circle"}),e.rating.label]})]})]})]},e.mal_id)}))},s.state={most_viewed:null,best_rated:null,our_selection:null,isLoading:s.props.loadingState},s}return Object(_.a)(i,[{key:"componentDidMount",value:function(){this.callApi()}},{key:"render",value:function(){return Object(h.jsx)("div",{id:"Navigation",children:!this.state.isLoading&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"Navigation__row",children:[Object(h.jsxs)("h2",{className:"Navigation__row__title",children:["Les plus regard\xe9s"," ",Object(h.jsx)("span",{className:"japan",children:"\u6700\u3082\u898b\u3089\u308c\u305f"})]}),Object(h.jsx)("div",{className:"Navigation__row__selection",children:Object(h.jsx)(this.getMoviesRow,{props:this.state.most_viewed})})]}),Object(h.jsxs)("div",{className:"Navigation__row",children:[Object(h.jsxs)("h2",{className:"Navigation__row__title",children:["Les mieux not\xe9s"," ",Object(h.jsx)("span",{className:"japan",children:"\u30c8\u30c3\u30d7\u30ec\u30fc\u30c8"})]}),Object(h.jsx)("div",{className:"Navigation__row__selection",children:Object(h.jsx)(this.getMoviesRow,{props:this.state.best_rated})})]}),Object(h.jsxs)("div",{className:"Navigation__row",children:[Object(h.jsxs)("h2",{className:"Navigation__row__title",children:["Notre s\xe9lection"," ",Object(h.jsx)("span",{className:"japan",children:"\u30bb\u30ec\u30af\u30b7\u30e7\u30f3"})]}),Object(h.jsx)("div",{className:"Navigation__row__selection",children:Object(h.jsx)(this.getMoviesRow,{props:this.state.our_selection})})]})]})})}}]),i}(s.Component),O=function(e){Object(j.a)(i,e);var t=Object(d.a)(i);function i(){return Object(m.a)(this,i),t.apply(this,arguments)}return Object(_.a)(i,[{key:"render",value:function(){return Object(h.jsx)("div",{id:"Loader",children:Object(h.jsx)("svg",{width:"100",height:"100",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#93C",children:Object(h.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(h.jsxs)("g",{transform:"translate(1 1)",strokeWidth:"2",children:[Object(h.jsx)("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),Object(h.jsx)("path",{d:"M36 18c0-9.94-8.06-18-18-18",children:Object(h.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})})]})})})})}}]),i}(s.Component),g=function(e){Object(j.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(m.a)(this,i),(s=t.call(this,e)).changeEpisode=function(e){s.setState({selectedEpisodeURL:e.target.value})},s.state={animeID:s.props.animeID,isLoading:s.props.loadingState,animeInformations:s.props.animeInformations,selectedEpisodeURL:s.props.animeInformations.episodes[0].streaming_link},s}return Object(_.a)(i,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"Anime",children:[Object(h.jsxs)("div",{className:"Anime__left",children:[Object(h.jsxs)("div",{className:"Anime__left__title",children:[Object(h.jsx)("h2",{children:this.state.animeInformations.en_title}),Object(h.jsx)("h3",{children:this.state.animeInformations.jp_title})]}),Object(h.jsx)("div",{className:"Anime__left__poster",children:Object(h.jsx)("img",{src:this.state.animeInformations.large_picture_url,alt:""})}),Object(h.jsxs)("div",{className:"Anime__left__info",children:[Object(h.jsx)("div",{className:"Anime__left__info__item",children:this.state.animeInformations.rating.label.toUpperCase()}),Object(h.jsx)("div",{className:"Anime__left__info__item",children:this.state.animeInformations.media_type.label.toUpperCase()}),Object(h.jsx)("div",{className:"Anime__left__info__item",children:this.state.animeInformations.source.label.toUpperCase()}),Object(h.jsxs)("div",{className:"Anime__left__info__item",children:["MaL ID : ",this.state.animeInformations.mal_id]}),Object(h.jsxs)("div",{className:"Anime__left__info__item",children:["Rang : # ",this.state.animeInformations.rank]}),Object(h.jsxs)("div",{className:"Anime__left__info__item",children:["Note : ",this.state.animeInformations.mean]})]})]}),Object(h.jsxs)("div",{className:"Anime__right",children:[Object(h.jsxs)("div",{className:"Anime__right__synopsis",children:[Object(h.jsx)("h3",{children:"Synopsis"}),this.state.animeInformations.synopsis]}),Object(h.jsxs)("div",{className:"Anime__right__select",children:[Object(h.jsx)("h4",{children:"Choississez une collection : "}),Object(h.jsx)("select",{name:"",id:"",onChange:this.changeEpisode,children:this.state.animeInformations.episodes.map((function(e,t){return Object(h.jsxs)("option",{value:e.streaming_link,children:["Collection ",e.episode_num]},t)}))})]}),Object(h.jsxs)("div",{className:"Anime__right__select",children:[Object(h.jsx)("h4",{children:"Choississez un \xe9pisode : "}),Object(h.jsx)("select",{name:"",id:"",onChange:this.changeEpisode,children:this.state.animeInformations.episodes.map((function(e,t){return Object(h.jsxs)("option",{value:e.streaming_link,children:["\xc9pisode ",e.episode_num]},t)}))})]}),Object(h.jsx)("div",{className:"Anime__right__video",children:Object(h.jsx)("iframe",{src:this.state.selectedEpisodeURL,title:this.props.en_title,allowFullScreen:!0,width:"70%",height:"90%"})})]})]})}}]),i}(s.Component),f=function(e){Object(j.a)(i,e);var t=Object(d.a)(i);function i(e){var s;return Object(m.a)(this,i),(s=t.call(this,e)).loadComplete=function(){s.setState({isLoading:!1})},s.onSearch=function(){s.setState({onHomePage:!1,onAnimePage:!1})},s.onHomepageClick=function(){s.setState({onHomePage:!0,onAnimePage:!1})},s.onAnimeClick=function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({animeID:t,animeIsLoading:!0}),e.next=3,s.getStreamingLink(t);case 3:s.setState({onHomePage:!1,onAnimePage:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.getStreamingLink=function(){var e=Object(l.a)(r.a.mark((function e(t){var i,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3003/api/streaming/".concat(t));case 2:return i=e.sent,e.next=5,i.json(t);case 5:n=e.sent,s.setState({animeID:t,animeIsLoading:!1,animeInformations:n}),console.log(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.state={isLoading:!0,onHomePage:!0,onAnimePage:!1,animeID:null,animeIsLoading:!1,animeInformations:null},s}return Object(_.a)(i,[{key:"componentDidUpdate",value:function(){console.log(this.state)}},{key:"render",value:function(){return Object(h.jsxs)("div",{id:"App",children:[Object(h.jsx)(p,{onSearch:this.onSearch,onHomepageClick:this.onHomepageClick}),this.state.onHomePage&&Object(h.jsx)(u,{onLoadComplete:this.loadComplete,loadingState:this.state.isLoading,onAnimeClick:this.onAnimeClick,animeID:this.state.animeID,animeIsLoading:this.state.animeIsLoading}),this.state.onAnimePage&&Object(h.jsx)(g,{onLoadComplete:this.loadComplete,loadingState:this.state.isLoading,animeID:this.state.animeID,animeInformations:this.state.animeInformations}),this.state.isLoading&&Object(h.jsx)(O,{})]})}}]),i}(s.Component);i(16);c.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(f,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.7ec7f057.chunk.js.map